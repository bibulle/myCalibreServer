<md-toolbar color="primary" class="fixed-toolbar"
            md-peekaboo [scroller]="content.parentElement"
            [break]="190"
            breakAction="show"
            [ngClass]="{hide:over}"
            [style.left]="sidenavWidth + 'px'"
            [style.right]="scrollWidth + 'px'">
</md-toolbar>
<md-toolbar color="primary" class="fixed-toolbar"
            [ngClass]="{hide:over}"
            [style.left]="sidenavWidth + 'px'"
            [style.right]="scrollWidth + 'px'">
  <button md-button  *ngIf="!title.backUrl"
          class="md-hamburger md-icon-button"
          hide-gt-lg
          (click)="menu.open($event)"
          aria-label="Home">
    <md-icon class="md-dark">menu</md-icon>
  </button>
  <button md-button *ngIf="title.backUrl"
          class="md-icon-button"
          (click)="goBack()"
          aria-label="Back">
    <md-icon class="md-dark">arrow_back</md-icon>
  </button>
  <span md-peekaboo [scroller]="content.parentElement"
        [breakMd]="72"
        [breakXs]="20"
        breakAction="show">
    <span class="verbose-title">{{getPrimaryLabel()}}</span>
  </span>
  <span flex></span>
  <div flex="50" class="filter" md-peekaboo [scroller]="content.parentElement"
       [breakMd]="185"
       [breakXs]="100"
       breakAction="show">
    <filter-bar></filter-bar>
  </div>
</md-toolbar>

<md-sidenav-layout layout="row" fullscreen>
  <md-sidenav #menu class="app-menu" mode="side" >
    <md-toolbar routerLink="/">
      <h3>{{getSecondaryLabel()}}</h3>
      <a href="https://github.com/bibulle/myCalibreServer/releases/tag/v{{version}}"
         target="_blank"
         *ngIf="version" class="md-caption version">v{{version}}</a>
    </md-toolbar>
    <md-nav-list *ngIf="user.username">
      <md-card-header class="user">
        <img md-card-avatar src="{{user.avatarUrl}}" *ngIf="user.avatarUrl" [md-menu-trigger-for]="profilemenu">
        <md-icon md-card-avatar *ngIf="!user.avatarUrl" [md-menu-trigger-for]="profilemenu">face</md-icon>
        <md-card-title [md-menu-trigger-for]="profilemenu">{{user.firstname}} {{user.lastname}}</md-card-title>
        <md-card-subtitle [md-menu-trigger-for]="profilemenu">{{user.email}}</md-card-subtitle>
      </md-card-header>
      <md-menu x-position="after" y-position="below" #profilemenu="mdMenu" class="profile-menu">
        <button md-menu-item (click)="showProfile()">
          <span> Profile </span>
        </button>
        <button md-menu-item (click)="disconnect()">
          <span> Sign Out </span>
        </button>
      </md-menu>
      <md-list-item md-ink *ngFor="let l of links" routerLinkActive="active" routerLink="{{l.path}}" (click)="menu.opened=(menu.mode === 'side')">{{l.label}}
      </md-list-item>
    </md-nav-list>
  </md-sidenav>

  <md-content #content id="scrollView">
    <md-toolbar color="primary" class="hero">
      <h1 md-peekaboo [scroller]="content.parentElement"
          [breakMd]="72"
          [breakXs]="20"
          breakAction="hide">{{getPrimaryLabel()}}</h1>
    </md-toolbar>
    <md-toolbar class="filter" md-peekaboo [scroller]="content.parentElement"
                [breakMd]="185"
                [breakXs]="100"
                breakAction="hide" *ngIf="!filter.not_displayed">
      <span flex></span>
      <div flex="50">
        <filter-bar></filter-bar>
      </div>
    </md-toolbar>
    <main layout="row" layout-align="center center">
      <md-content class="contents" md-scroll-y layout-padding>
        <router-outlet></router-outlet>
      </md-content>
    </main>

    <docs-footer></docs-footer>

  </md-content>
</md-sidenav-layout>